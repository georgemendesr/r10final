import{j as e,h as r}from"./admin-yPU_b3xj.js";import{b as s,r as t,L as a}from"./vendor-Bfak-lhW.js";import"./icons-BUd8i-O7.js";const n=()=>{const[n]=s(),[o,d]=t.useState(""),[l,i]=t.useState(""),[c,m]=t.useState(null),[u,h]=t.useState(!1),x=n.get("token")||"";t.useEffect(()=>{x||m("Token inválido")},[x]);return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow p-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Redefinir senha"}),u?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 text-green-800 rounded",children:"Senha redefinida com sucesso."}),e.jsx(a,{to:"/login",className:"inline-block bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",children:"Ir para login"})]}):e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),m(null),o.length<6)return m("Senha deve ter ao menos 6 caracteres");if(o!==l)return m("As senhas não coincidem");try{const e=await fetch(`${r}/auth/reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:x,password:o})});if(!e.ok){const r=await e.text();throw new Error(r||"Falha ao redefinir")}h(!0)}catch(s){m((null==s?void 0:s.message)||"Falha ao redefinir")}},children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nova senha"}),e.jsx("input",{type:"password",value:o,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 border rounded-lg mb-3"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar senha"}),e.jsx("input",{type:"password",value:l,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 border rounded-lg mb-3"}),c&&e.jsx("div",{className:"mb-3 p-2 text-sm bg-red-50 border border-red-200 text-red-700 rounded",children:c}),e.jsx("button",{className:"w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-medium",children:"Redefinir"})]})]})})};export{n as default};

import{j as e,f as t}from"./admin-yPU_b3xj.js";import{r as a,L as s,d as r}from"./vendor-Bfak-lhW.js";import{A as n,r as i,g as o,a as l,b as c,H as d,c as m,d as u,B as p,e as h,F as g}from"./index-D1f89AXD.js";import{ax as x,au as b,ay as f,az as j,aA as v,K as y,aB as w,V as N,aC as S,aD as k,a3 as $}from"./icons-BUd8i-O7.js";const E=({post:t,content:s})=>{const{enabled:r,loading:n,url:i,onClick:o}=function(e,t){const[s,r]=a.useState(!1),[n,i]=a.useState(!1),[o,l]=a.useState(),[c,d]=a.useState(null),[m,u]=a.useState(null);return a.useEffect(()=>{(null==e?void 0:e.id)?r(!0):r(!1)},[e]),{enabled:s,loading:n,url:o,error:c,response:m,onClick:async()=>{var a,r,o,c,m,p,h,g;if(s&&!n&&(null==e?void 0:e.id)){i(!0),d(null);try{(null==(r=null==(a=document.querySelector("article h1, .article-title, h1.title, main h1"))?void 0:a.textContent)?void 0:r.trim())||null==(c=null==(o=document.querySelector("h1"))?void 0:o.textContent)||c.trim(),(null==(p=null==(m=document.querySelector("article .subtitle, .article-subtitle, .text-gray-600, .lead"))?void 0:m.textContent)?void 0:p.trim())||null==(g=null==(h=document.querySelector(".text-gray-600"))?void 0:h.textContent)||g.trim(),Array.from(document.querySelectorAll("article .content p, article .article-body p, .post-content p")).map(e=>{var t;return null==(t=e.textContent)?void 0:t.trim()}).filter(Boolean).join(" ")||Array.from(document.querySelectorAll("article p, main p, .content p")).map(e=>{var t;return null==(t=e.textContent)?void 0:t.trim()}).filter(Boolean).join(" ")||Array.from(document.querySelectorAll("p")).map(e=>{var t;return null==(t=e.textContent)?void 0:t.trim()}).filter(Boolean).slice(0,10).join(" ");const s=(window.location.hostname.includes("render.com")||window.location.hostname.includes("r10piaui")?window.location.origin:"/api").replace("/api",""),n=await fetch(`${s}/api/tts/generate-post/${e.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({voiceName:t})});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`Erro ${n.status}: ${n.statusText}`)}const i=await n.json();if(!i.success)throw new Error(i.error||"Erro ao gerar áudio");l(i.audioUrl),u({ok:!0,audioUrl:i.audioUrl,cached:i.cached,elevenLabsUsed:!1,vinhetaUsada:""})}catch(x){d(x instanceof Error?x.message:"Erro ao gerar áudio")}finally{i(!1)}}},reset:()=>{l(void 0),d(null),i(!1)}}}(t),[l,c]=a.useState(!1),[d,m]=a.useState(!1),[u,p]=a.useState(0),[h,g]=a.useState(0),[j,v]=a.useState(!1),[y,w]=a.useState("idle"),[N,S]=a.useState(!1),k=a.useRef(null),$=a.useRef(null),E=a.useRef(null);a.useEffect(()=>{N&&i&&(S(!1),I(i))},[i,N]);const I=e=>{w("vinheta");const t=(()=>{const e=["/audio/vinheta1.mp3","/audio/vinheta2.mp3","/audio/vinheta3.mp3"];return e[Math.floor(Math.random()*e.length)]})();E.current=new Audio(t),E.current.volume=.8,E.current.onended=()=>{w("tts");try{C(e)}catch(t){}},E.current.onerror=()=>{v(!1),w("idle")},E.current.play().catch(e=>{v(!1),w("idle")})},C=e=>{$.current&&$.current.pause(),$.current=new Audio(e),$.current.volume=.9,$.current.onloadedmetadata=()=>{var e;g((null==(e=$.current)?void 0:e.duration)||0)},$.current.ontimeupdate=()=>{if($.current){const e=$.current.currentTime/$.current.duration*100;p(e||0)}},$.current.onended=()=>{p(0),v(!1),w("idle")},$.current.onerror=e=>{v(!1),w("idle")},$.current.play().then(()=>{}).catch(e=>{v(!1),w("idle")})},R=async()=>{if(s){m(!0);try{const e=s.replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/#{1,6}\s*/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/!\[([^\]]*)\]\([^)]+\)/g,"").replace(/```[\s\S]*?```/g,"").replace(/`([^`]+)`/g,"$1").replace(/\s+/g," ").replace(/\n{3,}/g,"\n\n").trim(),t=speechSynthesis.getVoices();let a=null;const r=["Google português do Brasil","Microsoft Maria Desktop","Microsoft Daniel Desktop","Google pt-BR","pt-BR","pt_BR"];for(const s of r)if(a=t.find(e=>e.lang.includes("pt-BR")&&e.name.includes(s)),a)break;a||(a=t.find(e=>e.lang.includes("pt-BR")||e.lang.includes("pt_BR")));const n=new SpeechSynthesisUtterance(e);n.lang="pt-BR",n.rate=1,n.pitch=1,n.volume=.9,a&&(n.voice=a),m(!1),n.onstart=()=>{c(!0);const t=e.length/15*1e3;g(t/1e3);let a=0;const s=setInterval(()=>{a+=2,a>=100?clearInterval(s):p(a)},t/50)},n.onend=()=>{c(!1),p(0)},n.onerror=()=>{c(!1),m(!1),p(0)},k.current=n,speechSynthesis.speak(n)}catch(e){m(!1)}}};a.useEffect(()=>{i&&"tts"===y&&C(i)},[i,y]),a.useEffect(()=>()=>{k.current&&speechSynthesis.cancel(),$.current&&$.current.pause(),E.current&&E.current.pause()},[]);const T=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,A=n||d,q=j||l;return e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6","data-e2e":"smart-audio-player",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:async()=>{if(j)return E.current&&(E.current.pause(),E.current=null),$.current&&$.current.pause(),v(!1),w("idle"),void p(0);l?$.current?($.current.pause(),c(!1)):(speechSynthesis.cancel(),c(!1)):r?await(async()=>{v(!0),w("generating");try{i?I(i):(S(!0),await o())}catch(e){v(!1),w("idle"),S(!1),await R()}})():await R()},disabled:A,"data-e2e":"audio-player-button",className:"flex-shrink-0 w-10 h-10 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-full flex items-center justify-center transition-colors duration-200 shadow-sm",children:A?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):q?e.jsx(x,{className:"w-4 h-4"}):e.jsx(b,{className:"w-4 h-4 ml-0.5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"generating"===y?"Gerando áudio de alta qualidade...":"vinheta"===y?"Tocando vinheta...":"tts"===y||q?"Reproduzindo...":A?"Carregando...":"Clique para ouvir"})]}),e.jsxs("span",{className:"text-xs",children:[T(u/100*h)," / ",T(h)]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"bg-blue-600 h-full transition-all duration-300 ease-out rounded-full",style:{width:`${u}%`}})})]})]})})},I=()=>e.jsx("div",{className:"flex justify-center",children:e.jsx(n,{position:"sidebar-article"})}),C=a.memo(()=>{const[t,r]=a.useState([]),[n,i]=a.useState(!0),[o,l]=a.useState(null);return a.useEffect(()=>{!async function(){try{i(!0),l(null);const e="/api/posts/most-read",t=await fetch(e);if(!t.ok)throw new Error(`Erro ${t.status}: ${t.statusText}`);const a=await t.json();Array.isArray(a)&&a.length>0?r(a.slice(0,5)):r([])}catch(e){l(e instanceof Error?e.message:"Erro desconhecido"),r([])}finally{i(!1)}}()},[]),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl shadow-lg border-l-4 border-red-500 p-6",children:[e.jsxs("div",{className:"flex items-center mb-5",children:[e.jsx("div",{className:"w-2 h-6 bg-red-500 rounded-full mr-3"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Mais Lidas"})]}),n&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2 text-sm",children:"Carregando..."})]}),o&&e.jsx("div",{className:"text-center py-4",children:e.jsxs("p",{className:"text-red-600 text-sm",children:["Erro ao carregar: ",o]})}),!n&&!o&&0===t.length&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhuma notícia encontrada"})}),!n&&!o&&t.length>0&&e.jsx("div",{className:"space-y-3",children:t.map((t,a)=>{var r;return e.jsx("div",{className:"group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:a+1}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:t.imagemUrl||"/logo-r10-piaui.png",alt:t.titulo||"Imagem da notícia",className:"w-12 h-12 rounded object-cover flex-shrink-0",onError:e=>{e.currentTarget.src="/logo-r10-piaui.png"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx(s,{to:`/noticia/${t.categoria||"geral"}/${null==(r=t.titulo)?void 0:r.replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").toLowerCase()}/${t.id}`,className:"text-sm font-medium text-gray-700 hover:text-red-600 transition-colors leading-tight block",children:t.titulo||t.title||"Título não disponível"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[e.jsx("span",{children:"👁️"}),e.jsx("span",{children:((t.visualizacoes||0)+200).toLocaleString("pt-BR")})]})]})]})})]})},t.id)})})]})});C.displayName="MostRead";const R=({currentPostId:t,category:r})=>{const[n,i]=a.useState([]),[o,l]=a.useState(!0);return a.useEffect(()=>{!async function(){try{l(!0);const e="/api/posts",a=await fetch(e);if(!a.ok)throw new Error(`Erro ${a.status}`);const s=await a.json();let n=Array.isArray(s)?s:[];r?n=n.filter(e=>e.categoria===r&&e.id!==t):t&&(n=n.filter(e=>e.id!==t)),i(n.slice(0,4))}catch(e){i([])}finally{l(!1)}}()},[t,r]),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"bg-blue-600 text-white p-3 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("h3",{className:"font-bold",children:"RELACIONADAS"})]})}),e.jsx("div",{className:"p-3",children:o?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"})}):0===n.length?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhuma notícia relacionada"})}):e.jsx("div",{className:"space-y-3",children:n.map(t=>{var a;return e.jsx(s,{to:`/noticia/${t.categoria||"geral"}/${null==(a=t.titulo)?void 0:a.replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").toLowerCase()}/${t.id}`,className:"block hover:bg-gray-50 p-2 rounded transition-colors",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 leading-tight mb-1 hover:text-blue-600 transition-colors",children:t.titulo}),e.jsx("span",{className:"text-xs text-blue-600 font-semibold uppercase",children:t.categoria})]})},t.id)})})})]})},T=()=>{const[t,s]=a.useState("");return e.jsxs("div",{className:"bg-brand text-white p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-sm mb-2",children:"📧 Receba as notícias do R10"}),e.jsx("p",{className:"text-xs mb-4 opacity-90",children:"Fique por dentro das principais notícias do dia direto no seu email."}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),s(""),alert("Obrigado por se inscrever!")},className:"space-y-3",children:[e.jsx("input",{type:"email",value:t,onChange:e=>s(e.target.value),placeholder:"Seu melhor email",className:"w-full px-3 py-2 text-gray-800 text-xs rounded focus:outline-none focus:ring-2 focus:ring-white/50",required:!0}),e.jsx("button",{type:"submit",className:"w-full bg-white text-brand py-2 text-xs font-bold rounded hover:bg-gray-100 transition-colors",children:"ASSINAR NEWSLETTER"})]})]})},A=a.memo(({articleId:t})=>{const[s,r]=a.useState({feliz:0,inspirado:0,surpreso:0,preocupado:0,triste:0,indignado:0});a.useEffect(()=>{let e=!1;const a=async()=>{try{const a=await o(t);e||r(a)}catch(a){}};a();const s=e=>{const s=e.detail;(null==s?void 0:s.articleId)===t&&a()};return window.addEventListener("reaction-updated",s),()=>{e=!0,window.removeEventListener("reaction-updated",s)}},[t]);const n=Object.values(s).reduce((e,t)=>e+t,0),l=i.map(e=>({...e,count:s[e.key],percentage:n>0?Math.round(s[e.key]/n*100):0})).sort((e,t)=>t.count-e.count).slice(0,3);return e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200 shadow-sm",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"📊"}),"Como os leitores se sentiram:"]}),e.jsx("div",{className:"flex items-center gap-3",children:l.map((t,a)=>e.jsxs("div",{className:"flex items-center gap-1 group relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform duration-200 cursor-pointer",children:t.emoji}),0===a&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full border border-white"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap pointer-events-none z-10 shadow-lg",children:[t.label,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-800"})]})]}),e.jsxs("span",{className:"text-sm font-bold text-gray-700 bg-white px-2 py-1 rounded-full border border-gray-200",children:[t.percentage,"%"]})]},t.key))})]})})})});A.displayName="ReactionResults";const q=a.memo(({articleId:t,onVote:s})=>{var r;const[n,d]=a.useState({feliz:0,inspirado:0,surpreso:0,preocupado:0,triste:0,indignado:0}),[m,u]=a.useState(null),[p,h]=a.useState(null),[g,x]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const e=await o(t),a=l(t);d(e),a&&u(a)}catch(e){}})()},[t]);const b=Object.values(n).reduce((e,t)=>e+t,0);return e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6 text-center",children:"Como esta matéria te deixa?"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:i.map(a=>{const r=(e=>0===b?0:Math.round(e/b*100))(n[a.key]),i=m===a.key,o=p===a.key;return e.jsxs("button",{onClick:()=>(async e=>{if(m!==e&&!g){x(!0),h(e);try{const r=await c(t,e);if(r.success){d(r.reactions),u(e),localStorage.setItem(`r10_user_reaction_${t}`,e),null==s||s(e);try{window.dispatchEvent(new CustomEvent("reaction-updated",{detail:{articleId:t,reaction:e}}))}catch(a){}}}catch(r){alert("Erro ao registrar seu voto. Tente novamente.")}finally{x(!1),setTimeout(()=>h(null),1e3)}}})(a.key),disabled:g,className:`\n                relative flex flex-col items-center p-4 rounded-xl border-2 transition-all duration-300\n                ${i?"bg-blue-100 border-blue-300 text-blue-700 scale-105":"bg-white border-gray-200 hover:border-gray-300 hover:scale-105"}\n                ${o?"animate-pulse":""}\n                ${g?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n                group\n              `,title:`${a.label} - ${r}%`,children:[e.jsx("div",{className:"text-2xl mb-2 transition-transform duration-300 "+(i?"scale-125":"group-hover:scale-110"),children:a.emoji}),e.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:a.label}),e.jsxs("div",{className:"text-sm font-bold "+(i?"text-blue-600":"text-gray-600"),children:[r,"%"]}),i&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]},a.key)})}),m&&e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Você escolheu: ",e.jsx("strong",{children:null==(r=i.find(e=>e.key===m))?void 0:r.label})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Toque em outra reação para alterar seu voto"})]})]})});q.displayName="ReactionVoting";const O=({articleData:s})=>{var n;const{id:i,titulo:o}=r(),l=a.useRef(null),[c,x]=a.useState(null),[b,f]=a.useState(!0),[j,O]=a.useState(null);var _;_=i,a.useEffect(()=>{if(!_)return;const e=setTimeout(async()=>{try{const e=await fetch(`/api/posts/${_}/view`,{method:"POST",headers:{"Content-Type":"application/json"}});e.ok&&await e.json()}catch(j){}},1e3);return()=>clearTimeout(e)},[_]);const M=e=>{const t=e.join(" ").split(" ").filter(e=>e.length>0).length,a=Math.ceil(t/200);return 1===a?"1 min":`${a} min`};a.useEffect(()=>{let e=!0;f(!0),O(null);return(async()=>{if(i)try{const a=await t(i);e&&a&&x({id:a.id,title:a.titulo,subtitle:a.subtitulo||"",author:a.autor,publishDate:a.publishedAt||a.dataPublicacao,category:a.categoria,subcategorias:[a.categoria],image:a.imagemUrl||"",content:a.conteudo?[a.conteudo]:[],tags:[],readTime:M(a.conteudo?[a.conteudo]:[]),views:((a.visualizacoes||0)+200).toString(),resumo:a.resumo||"",posicao:a.posicao})}catch(a){e&&O(String(a))}finally{e&&f(!1)}else e&&f(!1)})(),()=>{e=!1}},[i]),a.useEffect(()=>{const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const a=t.target;a.classList.contains("animate-in-view")||(a.classList.add("animate-in-view"),e.unobserve(a))}})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});return document.querySelectorAll('span[data-highlight="animated"]:not(.animate-in-view)').forEach(t=>{e.observe(t)}),()=>{e.disconnect()}},[c,s]);const L={id:"1",title:"Nova Política de Transporte Público em Teresina Promete Revolucionar Mobilidade Urbana",subtitle:"Sistema integrado de ônibus e metrô será implementado em 2024 com investimento de R$ 500 milhões",author:"Redação R10 Piauí",publishDate:"24 de janeiro de 2025",category:"POLÍTICA",subcategorias:["politica"],image:"https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=800&h=600&fit=crop&crop=center",content:["A Prefeitura de Teresina anunciou hoje uma nova política de transporte público que promete revolucionar a mobilidade urbana da capital piauiense. O projeto, que será implementado em 2024, representa um investimento de R$ 500 milhões e deve beneficiar mais de 800 mil usuários diários.","### Principais Mudanças","O novo sistema incluirá:","• Integração completa entre ônibus e metrô","• Aplicativo móvel para planejamento de rotas","• Cartão único para todos os transportes","• Frota de ônibus elétricos","• Estações modernizadas","### Investimento Estratégico","O prefeito Dr. Kleber Montezuma destacou a importância do projeto:",'> "Este é um investimento histórico para Teresina. Vamos transformar completamente a experiência de transporte público na nossa cidade, tornando-a mais eficiente, sustentável e acessível para todos os cidadãos."',"### Benefícios Esperados","A nova política deve reduzir o tempo de viagem em até 40%, além de diminuir significativamente a poluição ambiental. O sistema integrado permitirá que os usuários planejem suas rotas com antecedência através de um aplicativo móvel.","### Cronograma de Implementação","• Janeiro 2024: Início das obras de modernização","• Março 2024: Lançamento do aplicativo móvel","• Junho 2024: Inauguração das primeiras estações","• Dezembro 2024: Sistema totalmente operacional","### Reação da População","A população de Teresina recebeu a notícia com grande expectativa. Muitos moradores já enfrentam diariamente os desafios do transporte público atual e veem no novo sistema uma solução para seus problemas de mobilidade.","### Próximos Passos","A Prefeitura iniciará na próxima semana uma série de audiências públicas para ouvir sugestões da população e ajustar o projeto conforme necessário. O edital de licitação será publicado em fevereiro de 2024.","💡 Informação Importante: Os usuários do transporte público atual não precisarão se preocupar com a transição, pois o cartão atual continuará funcionando até a implementação completa do novo sistema."],tags:["transporte público","Teresina","mobilidade urbana","investimento","prefeitura"],readTime:M(["A Prefeitura de Teresina anunciou hoje uma nova política de transporte público que promete revolucionar a mobilidade urbana da capital piauiense. O projeto, que será implementado em 2024, representa um investimento de R$ 500 milhões e deve beneficiar mais de 800 mil usuários diários.","A nova política inclui a criação de um sistema integrado que conectará ônibus, VLT e ciclofaixas, oferecendo aos cidadãos uma experiência de mobilidade mais eficiente e sustentável.","### Próximos Passos","A Prefeitura iniciará na próxima semana uma série de audiências públicas para ouvir sugestões da população e ajustar o projeto conforme necessário. O edital de licitação será publicado em fevereiro de 2024.","💡 Informação Importante: Os usuários do transporte público atual não precisarão se preocupar com a transição, pois o cartão atual continuará funcionando até a implementação completa do novo sistema."]),posicao:"supermanchete"},P=c||s||L;if(j)return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(d,{}),e.jsx("div",{className:"container mx-auto px-4 max-w-[1250px] py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Erro ao carregar matéria"}),e.jsx("p",{className:"text-gray-600",children:j})]})})]});if(b||!P)return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(d,{}),e.jsx("div",{className:"container mx-auto px-4 max-w-[1250px] py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"})]})})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 font-body",children:[e.jsx(m,{children:(()=>{const t=u({title:P.title,subtitle:P.subtitle,imagemDestaque:P.image});return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:t.title}),e.jsx("meta",{name:"description",content:t.description}),e.jsx("meta",{property:"og:title",content:t.title}),e.jsx("meta",{property:"og:description",content:t.description}),e.jsx("meta",{property:"og:url",content:t.url}),e.jsx("meta",{property:"og:image",content:t.image}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"})]})})()}),e.jsx("style",{children:'\n        /* Destaque animado - estado inicial (salvo no banco) */\n        span[data-highlight="animated"],\n        .highlight-animated {\n          position: relative;\n          background: linear-gradient(90deg, #FF8C42, #FF6B35);\n          background-size: 0% 100%;\n          background-repeat: no-repeat;\n          background-position: left center;\n          transition: background-size 1.2s cubic-bezier(0.4, 0, 0.2, 1);\n          color: #000;\n          font-weight: 600;\n          padding: 2px 4px;\n          border-radius: 4px;\n          display: inline;\n        }\n        \n        /* Destaque animado - quando visível na tela */\n        span[data-highlight="animated"].animate-in-view,\n        .highlight-animated.animate-in-view {\n          background-size: 100% 100% !important;\n        }\n      '}),e.jsx(d,{}),e.jsx(p,{}),e.jsx("article",{className:"bg-white",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-[1250px] py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mb-3",children:e.jsx("span",{className:"inline-block px-3 py-1 bg-red-600 text-white text-sm font-medium rounded-full uppercase tracking-wide",children:"editoriais"===P.category&&(null==(n=P.subcategorias)?void 0:n.length)>0?P.subcategorias[0]:"editoriais"===P.category?"Geral":P.category})}),e.jsx("h1",{className:"artigo-title",style:{color:"#111"},children:e.jsx("span",{style:{color:h(P.category)},children:P.title})}),P.subtitle&&e.jsx("p",{className:"artigo-subtitle text-gray-600 leading-relaxed mb-6",children:P.subtitle})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[e.jsx("div",{className:"col-span-1 hidden lg:block",children:e.jsx("div",{className:"sticky top-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>window.open(`https://wa.me/?text=${encodeURIComponent(P.title+" - "+window.location.href)}`,"_blank"),className:"w-10 h-10 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center",title:"Compartilhar no WhatsApp",children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}&quote=${encodeURIComponent(P.title)}`,"_blank"),className:"w-10 h-10 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",title:"Compartilhar no Facebook",children:e.jsx(y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(P.title)}&url=${encodeURIComponent(window.location.href)}`,"_blank"),className:"w-10 h-10 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition-colors flex items-center justify-center",title:"Compartilhar no Twitter",children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{navigator.share?navigator.share({title:P.title,text:P.subtitle,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Link copiado para a área de transferência!"))},className:"w-10 h-10 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",title:"Compartilhar",children:e.jsx(N,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:e.jsx("button",{className:"w-10 h-10 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center",children:e.jsx(S,{className:"w-4 h-4"})})})]})})}),e.jsxs("div",{className:"col-span-12 lg:col-span-8",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-gray-500 text-sm border-b border-gray-200 pb-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsxs("span",{children:["Por ",e.jsx("strong",{className:"text-gray-700",children:P.author})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:(e=>{try{return new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}})(P.publishDate)})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:["📖 ",M(P.content)," de leitura"]})})]}),e.jsx(E,{post:{id:P.id,posicao:P.posicao,title:P.title,subtitle:P.subtitle},content:P.content.join("\n\n")}),e.jsx("div",{className:"mb-6",children:e.jsx(A,{articleId:P.id})}),e.jsx("figure",{className:"mb-8",children:e.jsx("img",{src:P.image,alt:P.title,className:"w-full h-96 object-cover rounded-xl shadow-lg"})}),(()=>{const t=e=>e.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim(),a=t(P.content.join("\n\n")).length>=500,s=e=>/[.!?]$/.test(e),r=e=>e.replace(/\s+/g," ").trim(),n=e=>s(e)?e:e.replace(/[\.,;:!?]+$/,"").trim()+".",i=e=>n(r(e).slice(0,80)),o=(e,t=80)=>{let a=r(e);if(a.length<=t)return n(a);const s=/[.!?]/g;let i,o=-1;for(;(i=s.exec(a))&&i.index<=t;)o=i.index;if(o>=40)return n(a.slice(0,o+1).trim());const l=Math.max(a.lastIndexOf(";",t),a.lastIndexOf(":",t),a.lastIndexOf(" — ",t),a.lastIndexOf(" – ",t),a.lastIndexOf(" - ",t));if(l>=40)return n(a.slice(0,l).trim());const c=[" que "," com "," para "," por "," onde "," quando "," porque "," e "];let d=-1;for(const r of c){const e=a.lastIndexOf(r,t);e>d&&(d=e)}if(d>=40)return n(a.slice(0,d).trim());const m=a.lastIndexOf(",",t);if(m>=40)return n(a.slice(0,m).trim());const u=a.lastIndexOf(" ",t),p=u>40?a.slice(0,u):a.slice(0,t);return n(p.trim())},l=e=>{const t=new Set,a=[];for(const s of e){const e=s.toLowerCase();t.has(e)||(t.add(e),a.push(s))}return a},{bullets:c,headings:d,sentences:m}=(e=>{const a=e.map(t).filter(e=>e.length>0),s=[];a.forEach(e=>{const t=e.split(/\s*[•\-*]\s+/g).map(e=>e.trim()).filter(Boolean);t.length>1&&t.forEach(e=>{e.length>=20&&s.push(e)})});const r=e.filter(e=>e.startsWith("### ")).map(e=>e.replace(/^###\s+/,"").trim()).filter(e=>e.length>=20),n=[];return a.forEach(e=>{e.split(new RegExp("(?<=[.!?])\\s+","g")).forEach(e=>{const t=e.replace(/^["'“”\s]+|[\s]+$/g,"").trim();t.length>=20&&n.push(t)})}),{bullets:s,headings:r,sentences:n}})(P.content),u=e=>l(e.map(r)),p=[];for(const e of u(c)){if(p.length>=4)break;const t=o(e,80);p.push(t)}for(const e of u(d)){if(p.length>=4)break;const t=i(e);p.push(t)}for(const e of u(m)){if(p.length>=4)break;e.length<=80&&s(e)&&p.push(e)}for(const e of u(m)){if(p.length>=4)break;const t=o(e,80);p.push(t)}const h=l(p.filter(Boolean)).slice(0,4);return!a||h.length<4?null:e.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 rounded-2xl max-w-2xl mx-auto",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"📋"}),"Resumo da Notícia"]}),e.jsx("div",{className:"space-y-3",children:h.map((t,a)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-600 font-bold mr-3 mt-0.5 text-lg",children:"•"}),e.jsx("span",{className:"text-gray-800 leading-relaxed",children:t})]},a))})]})})(),e.jsx("div",{ref:l,className:"prose prose-lg max-w-none artigo-texto",children:P.content.map((t,a)=>{if(t.startsWith("### ")||t.includes("<h3")){let s=t.replace(/### (.*?)(?=\n|$)/g,"$1").replace(/<h3[^>]*>(.*?)<\/h3>/g,"$1");return e.jsx("h3",{className:"text-2xl font-bold text-gray-900 my-6 mt-8 font-poppins",children:s},a)}if(t.startsWith("> ")||t.includes("<blockquote")){const s=t.match(/<blockquote[^>]*>(.*?)<\/blockquote>/s);let r="";return s?r=s[1]:t.startsWith("> ")&&(r=t.replace(/^> (.*?)(?=\n|$)/gm,"$1")),r=r.replace(/<\/?div[^>]*>/g,"").replace(/<br\s*\/?>/g,"").trim(),e.jsx("blockquote",{className:"border-l-4 border-blue-600 pl-6 py-4 my-8 bg-blue-50 rounded-r-lg",children:e.jsx("p",{className:"text-lg font-normal text-gray-800 italic",dangerouslySetInnerHTML:{__html:r}})},a)}if(t.startsWith("• "))return e.jsxs("div",{className:"flex items-start mb-3",children:[e.jsx("span",{className:"text-blue-600 font-bold mr-3 mt-1",children:"•"}),e.jsx("span",{className:"text-gray-800 text-base",children:t.replace("• ","")})]},a);if(t.includes('data-highlight="animated"')||t.includes('class="highlight-animated"')||t.includes("===")||t.includes('<span class="highlight-simple">')){let s=t.replace(/<span[^>]*data-highlight="animated"[^>]*>(.*?)<\/span>/g,(e,t)=>e.includes("style=")?e:`<span data-highlight="animated" class="highlight-animated">${t}</span>`).replace(/===(.*?)===/g,'<span data-highlight="animated" class="highlight-animated">$1</span>').replace(/==(.*?)===/g,'<span class="bg-yellow-200 px-1 rounded border border-yellow-400">$1</span>').replace(/<span class="highlight-simple"[^>]*>(.*?)<\/span>/g,'<span class="bg-yellow-200 px-1 rounded border border-yellow-400">$1</span>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(new RegExp("(?<!\\*)\\*([^*\\n]+?)\\*(?!\\*)","g"),"<em>$1</em>").replace(/__(.*?)__/g,"<u>$1</u>");return e.jsx("p",{className:"text-gray-800 leading-relaxed mb-6",style:{fontFamily:"Figtree, sans-serif",fontSize:"18px",lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:s}},a)}if(t.includes("💡")||t.includes('<div class="info-box">')){let s=t.replace(/<div class="info-box"[^>]*>(.*?)<\/div>/g,"$1");return e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 my-6 rounded-r-lg",children:e.jsx("p",{className:"text-gray-800 text-base font-normal",dangerouslySetInnerHTML:{__html:s}})},a)}{let s=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(new RegExp("(?<!\\*)\\*([^*\\n]+?)\\*(?!\\*)","g"),"<em>$1</em>").replace(/__(.*?)__/g,"<u>$1</u>");return e.jsx("p",{className:"text-gray-800 leading-relaxed mb-6",style:{fontFamily:"Figtree, sans-serif",fontSize:"18px",lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:s}},a)}})}),e.jsx("div",{className:"mt-8 mb-6",children:e.jsx(q,{articleId:P.id})}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Tags:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:P.tags.map((t,a)=>e.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full hover:bg-gray-200 transition-colors cursor-pointer",children:["#",t]},a))})]}),e.jsxs("div",{className:"lg:hidden mt-8 space-y-6",children:[e.jsx(I,{}),e.jsx(R,{currentPostId:i,category:P.category}),e.jsx(C,{}),e.jsx(T,{})]})]}),e.jsxs("aside",{className:"col-span-3 hidden lg:flex flex-col gap-8",children:[e.jsx(I,{}),e.jsx(C,{}),e.jsx(R,{currentPostId:i,category:P.category}),e.jsx(T,{})]})]})]})}),e.jsx("section",{className:"bg-gray-50 py-12",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-[1180px]",children:[e.jsx("h2",{className:"text-2xl font-black text-neutral900 mb-8 font-title",children:"Notícias Relacionadas"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{title:"Ministério da Saúde amplia campanhas de prevenção ao câncer",category:"SAÚDE",image:"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=150&h=100&fit=crop"},{title:"Número de casos de câncer aumenta 20% no último ano",category:"SAÚDE",image:"https://images.unsplash.com/photo-1576671081837-49000212a370?w=150&h=100&fit=crop"},{title:"Nova tecnologia promete revolucionar tratamento oncológico",category:"TECNOLOGIA",image:"https://images.unsplash.com/photo-1530497610245-94d3c16cda28?w=150&h=100&fit=crop"}].map((t,a)=>e.jsxs("article",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300 cursor-pointer group",children:[e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-40 object-cover rounded-xl group-hover:scale-105 transition-transform duration-300"}),e.jsxs("div",{className:"p-4",children:[e.jsx("span",{className:"text-gray-500 text-xs font-bold uppercase tracking-wide",children:t.category}),e.jsx("h3",{className:"text-gray-900 font-bold mt-2 leading-tight group-hover:text-brand transition-colors duration-300",children:t.title})]})]},a))})]})}),e.jsx(g,{})]})};export{O as default};

import{u as e,j as s,h as a}from"./admin-CxAJ7kp8.js";import{r as t}from"./vendor-Bfak-lhW.js";import"./icons-C9jemfr7.js";const r=()=>{const{isAuthenticated:r}=e(),[l,d]=t.useState(30),[i,n]=t.useState(null),[c,o]=t.useState(!1),[x,m]=t.useState(null);async function h(){if(r){o(!0),m(null);try{const e=await a(`/social/analytics?days=${l}`);n(e)}catch(e){m((null==e?void 0:e.message)||"Falha ao carregar analytics")}finally{o(!1)}}}return t.useEffect(()=>{h()},[l,r]),s.jsx("main",{id:"conteudo",className:"bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-[1250px]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Analytics (IG + FB)"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm text-gray-600",children:"Período:"}),s.jsxs("select",{value:l,onChange:e=>d(parseInt(e.target.value)),className:"border rounded px-2 py-1",children:[s.jsx("option",{value:7,children:"7 dias"}),s.jsx("option",{value:14,children:"14 dias"}),s.jsx("option",{value:30,children:"30 dias"}),s.jsx("option",{value:60,children:"60 dias"}),s.jsx("option",{value:90,children:"90 dias"})]}),s.jsx("button",{onClick:h,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Atualizar"})]})]}),c&&s.jsx("div",{className:"p-4 bg-white rounded shadow",children:"Carregando…"}),x&&s.jsx("div",{className:"p-4 bg-white rounded shadow text-red-600",children:x}),i&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Instagram"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["@",i.instagram.account.username||"—"," · Seguidores: ",i.instagram.account.followers??"—"]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:i.instagram.metrics.map(e=>{var a;return s.jsxs("div",{className:"border rounded p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("strong",{children:e.name}),s.jsx("span",{className:"text-xs px-2 py-0.5 rounded "+("ok"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.status})]}),"ok"===e.status?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[(null==(a=e.series)?void 0:a.length)||0," pontos · período: ",e.period]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left pr-4",children:"Data"}),s.jsx("th",{className:"text-left",children:"Valor"})]})}),s.jsx("tbody",{children:(e.series||[]).map(e=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"pr-4 py-1",children:e.date}),s.jsx("td",{className:"py-1",children:e.value})]},e.date))})]})})]}):s.jsxs("div",{className:"text-sm text-gray-600",children:["Falha: ","string"==typeof e.error?e.error:JSON.stringify(e.error)]})]},`ig-${e.name}`)})})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Facebook"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[i.facebook.account.name||"—"," · Seguidores: ",i.facebook.account.followers??"—"]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:i.facebook.metrics.map(e=>{var a;return s.jsxs("div",{className:"border rounded p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("strong",{children:e.name}),s.jsx("span",{className:"text-xs px-2 py-0.5 rounded "+("ok"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.status})]}),"ok"===e.status?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[(null==(a=e.series)?void 0:a.length)||0," pontos · período: ",e.period]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left pr-4",children:"Data"}),s.jsx("th",{className:"text-left",children:"Valor"})]})}),s.jsx("tbody",{children:(e.series||[]).map(e=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"pr-4 py-1",children:e.date}),s.jsx("td",{className:"py-1",children:e.value})]},e.date))})]})})]}):s.jsxs("div",{className:"text-sm text-gray-600",children:["Falha: ","string"==typeof e.error?e.error:JSON.stringify(e.error)]})]},`fb-${e.name}`)})})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Gerado em ",new Date(i.generatedAt).toLocaleString()," · Período: ",i.period.since," a ",i.period.until]})]})]})})};export{r as default};
